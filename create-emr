aws emr create-cluster --applications Name=Hadoop Name=Hive Name=Spark Name=Ganglia --tags 'Project=bigdata' --ec2-attributes '{"KeyName":"EC2-bigtapp-key","AdditionalSlaveSecurityGroups":["sg-8566c6e3"],"InstanceProfile":"AdminAccess","ServiceAccessSecurityGroup":"sg-d666c6b0","SubnetId":"subnet-8718fae0","EmrManagedSlaveSecurityGroup":"sg-c365c5a5","EmrManagedMasterSecurityGroup":"sg-3366c655","AdditionalMasterSecurityGroups":["sg-74872012"]}' --release-label emr-5.11.0 --log-uri 's3n://datalake-uat/' --instance-groups '[{"InstanceCount":2,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}]},"InstanceGroupType":"CORE","InstanceType":"m4.xlarge","Name":"slave"},{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}]},"InstanceGroupType":"MASTER","InstanceType":"m4.xlarge","Name":"master"}]' --bootstrap-actions '[{"Path":"s3://datalake-uat/test/emr_bootstrap_java_8.sh","Name":"boot_java8"}]' --no-visible-to-all-users --ebs-root-volume-size 10 --service-role EMR_DefaultRole --enable-debugging --scale-down-behavior TERMINATE_AT_TASK_COMPLETION --region ap-southeast-1 --name 'emr-dev-harleen-27-2-18' --configurations '[{"Classification": "capacity-scheduler","Properties": {"yarn.scheduler.capacity.resource-calculator": "org.apache.hadoop.yarn.util.resource.DominantResourceCalculator"}}]' 

# add the following to run a script named run.sh
--steps Type=CUSTOM_JAR,Name=CustomJAR,ActionOnFailure=CONTINUE,Jar=s3://ap-southeast-1.elasticmapreduce/libs/script-runner/script-runner.jar,Args=["s3://modharleen/directToDashboard/run.sh"]
